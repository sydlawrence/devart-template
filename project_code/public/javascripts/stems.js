var AudioStems = function(launchpad) {
  this.active = false;

  var that = this;

  var stems = [["001.mp3","002.mp3","003.mp3","004.mp3","005.mp3","006.mp3","007.mp3","008.mp3","009.mp3","010.mp3","011.mp3","012.mp3","013.mp3","014.mp3","015.mp3","016.mp3","017.mp3","018.mp3","019.mp3","020.mp3","021.mp3","022.mp3","023.mp3","024.mp3","025.mp3","026.mp3","027.mp3","028.mp3","029.mp3","030.mp3","031.mp3","032.mp3"],["033.mp3","034.mp3","035.mp3","036.mp3","037.mp3","038.mp3","039.mp3","040.mp3","041.mp3","042.mp3","043.mp3","044.mp3","045.mp3","046.mp3","047.mp3","048.mp3","049.mp3","050.mp3","051.mp3","052.mp3","053.mp3","054.mp3","055.mp3","056.mp3","057.mp3","058.mp3","059.mp3","060.mp3","061.mp3","062.mp3","063.mp3","064.mp3"],["065.mp3","066.mp3","067.mp3","068.mp3","069.mp3","070.mp3","071.mp3","072.mp3","073.mp3","074.mp3","075.mp3","076.mp3","077.mp3","078.mp3","079.mp3","080.mp3","081.mp3","082.mp3","083.mp3","084.mp3","085.mp3","086.mp3","087.mp3","088.mp3","089.mp3","090.mp3","091.mp3","092.mp3","093.mp3","094.mp3","095.mp3","096.mp3"],["097.mp3","098.mp3","099.mp3","100.mp3","101.mp3","102.mp3","103.mp3","104.mp3","105.mp3","106.mp3","107.mp3","108.mp3","109.mp3","110.mp3","111.mp3","112.mp3","113.mp3","114.mp3","115.mp3","116.mp3","117.mp3","118.mp3","119.mp3","120.mp3","121.mp3","122.mp3","123.mp3","124.mp3","125.mp3","126.mp3","127.mp3","128.mp3"],["129.mp3","130.mp3","131.mp3","132.mp3","133.mp3","134.mp3","135.mp3","136.mp3","137.mp3","138.mp3","139.mp3","140.mp3","141.mp3","142.mp3","143.mp3","144.mp3","145.mp3","146.mp3","147.mp3","148.mp3","149.mp3","150.mp3","151.mp3","152.mp3","153.mp3","154.mp3","155.mp3","156.mp3","157.mp3","158.mp3","159.mp3","160.mp3"],["161.mp3","162.mp3","163.mp3","164.mp3","165.mp3","166.mp3","167.mp3","168.mp3","169.mp3","170.mp3","171.mp3","172.mp3","173.mp3","174.mp3","175.mp3","176.mp3","177.mp3","178.mp3","179.mp3","180.mp3","181.mp3","182.mp3","183.mp3","184.mp3","185.mp3","186.mp3","187.mp3","188.mp3","189.mp3","190.mp3","191.mp3","192.mp3"],["193.mp3","194.mp3","195.mp3","196.mp3","197.mp3","198.mp3","199.mp3","200.mp3","201.mp3","202.mp3","203.mp3","204.mp3","205.mp3","206.mp3","207.mp3","208.mp3","209.mp3","210.mp3","211.mp3","212.mp3","213.mp3","214.mp3","215.mp3","216.mp3","217.mp3","218.mp3","219.mp3","220.mp3","221.mp3","222.mp3","223.mp3","224.mp3"],["225.mp3","226.mp3","227.mp3","228.mp3","229.mp3","230.mp3","231.mp3","232.mp3","233.mp3","234.mp3","235.mp3","236.mp3","237.mp3","238.mp3","239.mp3","240.mp3","241.mp3","242.mp3","243.mp3","244.mp3","245.mp3","246.mp3","247.mp3","248.mp3","249.mp3","250.mp3","251.mp3","252.mp3","253.mp3","254.mp3","255.mp3","256.mp3"],["257.mp3","258.mp3","259.mp3","260.mp3","261.mp3","262.mp3","263.mp3","264.mp3","265.mp3","266.mp3","267.mp3","268.mp3","269.mp3","270.mp3","271.mp3","272.mp3","273.mp3","274.mp3","275.mp3","276.mp3","277.mp3","278.mp3","279.mp3","280.mp3","281.mp3","282.mp3","283.mp3","284.mp3","285.mp3","286.mp3","287.mp3","288.mp3"],["289.mp3","290.mp3","291.mp3","292.mp3","293.mp3","294.mp3","295.mp3","296.mp3","297.mp3","298.mp3","299.mp3","300.mp3","301.mp3","302.mp3","303.mp3","304.mp3","305.mp3","306.mp3","307.mp3","308.mp3","309.mp3","310.mp3","311.mp3","312.mp3","313.mp3","314.mp3","315.mp3","316.mp3","317.mp3","318.mp3","319.mp3","320.mp3"],["321.mp3","322.mp3","323.mp3","324.mp3","325.mp3","326.mp3","327.mp3","328.mp3","329.mp3","330.mp3","331.mp3","332.mp3","333.mp3","334.mp3","335.mp3","336.mp3","337.mp3","338.mp3","339.mp3","340.mp3","341.mp3","342.mp3","343.mp3","344.mp3","345.mp3","346.mp3","347.mp3","348.mp3","349.mp3","350.mp3","351.mp3","352.mp3"],["353.mp3","354.mp3","355.mp3","356.mp3","357.mp3","358.mp3","359.mp3","360.mp3","361.mp3","362.mp3","363.mp3","364.mp3","365.mp3","366.mp3","367.mp3","368.mp3","369.mp3","370.mp3","371.mp3","372.mp3","373.mp3","374.mp3","375.mp3","376.mp3","377.mp3","378.mp3","379.mp3","380.mp3","381.mp3","382.mp3","383.mp3","384.mp3"],["385.mp3","386.mp3","387.mp3","388.mp3","389.mp3","390.mp3","391.mp3","392.mp3","393.mp3","394.mp3","395.mp3","396.mp3","397.mp3","398.mp3","399.mp3","400.mp3","401.mp3","402.mp3","403.mp3","404.mp3","405.mp3","406.mp3","407.mp3","408.mp3","409.mp3","410.mp3","411.mp3","412.mp3","413.mp3","414.mp3","415.mp3","416.mp3"],["417.mp3","418.mp3","419.mp3","420.mp3","421.mp3","422.mp3","423.mp3","424.mp3","425.mp3","426.mp3","427.mp3","428.mp3","429.mp3","430.mp3","431.mp3","432.mp3","433.mp3","434.mp3","435.mp3","436.mp3","437.mp3","438.mp3","439.mp3","440.mp3","441.mp3","442.mp3","443.mp3","444.mp3","445.mp3","446.mp3","447.mp3","448.mp3"],["449.mp3","450.mp3","451.mp3","452.mp3","453.mp3","454.mp3","455.mp3","456.mp3","457.mp3","458.mp3","459.mp3","460.mp3","461.mp3","462.mp3","463.mp3","464.mp3","465.mp3","466.mp3","467.mp3","468.mp3","469.mp3","470.mp3","471.mp3","472.mp3","473.mp3","474.mp3","475.mp3","476.mp3","477.mp3","478.mp3","479.mp3","480.mp3"],["481.mp3","482.mp3","483.mp3","484.mp3","485.mp3","486.mp3","487.mp3","488.mp3","489.mp3","490.mp3","491.mp3","492.mp3","493.mp3","494.mp3","495.mp3","496.mp3","497.mp3","498.mp3","499.mp3","500.mp3","501.mp3","502.mp3","503.mp3","504.mp3","505.mp3","506.mp3","507.mp3","508.mp3","509.mp3","510.mp3","511.mp3","512.mp3"],["513.mp3","514.mp3","515.mp3","516.mp3","517.mp3","518.mp3","519.mp3","520.mp3","521.mp3","522.mp3","523.mp3","524.mp3","525.mp3","526.mp3","527.mp3","528.mp3","529.mp3","530.mp3","531.mp3","532.mp3","533.mp3","534.mp3","535.mp3","536.mp3","537.mp3","538.mp3","539.mp3","540.mp3","541.mp3","542.mp3","543.mp3","544.mp3"],["545.mp3","546.mp3","547.mp3","548.mp3","549.mp3","550.mp3","551.mp3","552.mp3","553.mp3","554.mp3","555.mp3","556.mp3","557.mp3","558.mp3","559.mp3","560.mp3","561.mp3","562.mp3","563.mp3","564.mp3","565.mp3","566.mp3","567.mp3","568.mp3","569.mp3","570.mp3","571.mp3","572.mp3","573.mp3","574.mp3","575.mp3","576.mp3"],["577.mp3","578.mp3","579.mp3","580.mp3","581.mp3","582.mp3","583.mp3","584.mp3","585.mp3","586.mp3","587.mp3","588.mp3","589.mp3","590.mp3","591.mp3","592.mp3","593.mp3","594.mp3","595.mp3","596.mp3","597.mp3","598.mp3","599.mp3","600.mp3","601.mp3","602.mp3","603.mp3","604.mp3","605.mp3","606.mp3","607.mp3","608.mp3"],["609.mp3","610.mp3","611.mp3","612.mp3","613.mp3","614.mp3","615.mp3","616.mp3","617.mp3","618.mp3","619.mp3","620.mp3","621.mp3","622.mp3","623.mp3","624.mp3","625.mp3","626.mp3","627.mp3","628.mp3","629.mp3","630.mp3","631.mp3","632.mp3","633.mp3","634.mp3","635.mp3","636.mp3","637.mp3","638.mp3","639.mp3","640.mp3"],["641.mp3","642.mp3","643.mp3","644.mp3","645.mp3","646.mp3","647.mp3","648.mp3","649.mp3","650.mp3","651.mp3","652.mp3","653.mp3","654.mp3","655.mp3","656.mp3","657.mp3","658.mp3","659.mp3","660.mp3","661.mp3","662.mp3","663.mp3","664.mp3","665.mp3","666.mp3","667.mp3","668.mp3","669.mp3","670.mp3","671.mp3","672.mp3"],["673.mp3","674.mp3","675.mp3","676.mp3","677.mp3","678.mp3","679.mp3","680.mp3","681.mp3","682.mp3","683.mp3","684.mp3","685.mp3","686.mp3","687.mp3","688.mp3","689.mp3","690.mp3","691.mp3","692.mp3","693.mp3","694.mp3","695.mp3","696.mp3","697.mp3","698.mp3","699.mp3","700.mp3","701.mp3","702.mp3","703.mp3","704.mp3"],["705.mp3","706.mp3","707.mp3","708.mp3","709.mp3","710.mp3","711.mp3","712.mp3","713.mp3","714.mp3","715.mp3","716.mp3","717.mp3","718.mp3","719.mp3","720.mp3","721.mp3","722.mp3","723.mp3","724.mp3","725.mp3","726.mp3","727.mp3","728.mp3","729.mp3","730.mp3","731.mp3","732.mp3","733.mp3","734.mp3","735.mp3","736.mp3"],["737.mp3","738.mp3","739.mp3","740.mp3","741.mp3","742.mp3","743.mp3","744.mp3","745.mp3","746.mp3","747.mp3","748.mp3","749.mp3","750.mp3","751.mp3","752.mp3","753.mp3","754.mp3","755.mp3","756.mp3","757.mp3","758.mp3","759.mp3","760.mp3","761.mp3","762.mp3","763.mp3","764.mp3","765.mp3","766.mp3","767.mp3","768.mp3"],["769.mp3","770.mp3","771.mp3","772.mp3","773.mp3","774.mp3","775.mp3","776.mp3","777.mp3","778.mp3","779.mp3","780.mp3","781.mp3","782.mp3","783.mp3","784.mp3","785.mp3","786.mp3","787.mp3","788.mp3","789.mp3","790.mp3","791.mp3","792.mp3","793.mp3","794.mp3","795.mp3","796.mp3","797.mp3","798.mp3","799.mp3","800.mp3"],["801.mp3","802.mp3","803.mp3","804.mp3","805.mp3","806.mp3","807.mp3","808.mp3","809.mp3","810.mp3","811.mp3","812.mp3","813.mp3","814.mp3","815.mp3","816.mp3","817.mp3","818.mp3","819.mp3","820.mp3","821.mp3","822.mp3","823.mp3","824.mp3","825.mp3","826.mp3","827.mp3","828.mp3","829.mp3","830.mp3","831.mp3","832.mp3"],["833.mp3","834.mp3","835.mp3","836.mp3","837.mp3","838.mp3","839.mp3","840.mp3","841.mp3","842.mp3","843.mp3","844.mp3","845.mp3","846.mp3","847.mp3","848.mp3","849.mp3","850.mp3","851.mp3","852.mp3","853.mp3","854.mp3","855.mp3","856.mp3","857.mp3","858.mp3","859.mp3","860.mp3","861.mp3","862.mp3","863.mp3","864.mp3"],["865.mp3","866.mp3","867.mp3","868.mp3","869.mp3","870.mp3","871.mp3","872.mp3","873.mp3","874.mp3","875.mp3","876.mp3","877.mp3","878.mp3","879.mp3","880.mp3","881.mp3","882.mp3","883.mp3","884.mp3","885.mp3","886.mp3","887.mp3","888.mp3","889.mp3","890.mp3","891.mp3","892.mp3","893.mp3","894.mp3","895.mp3","896.mp3"],["897.mp3","898.mp3","899.mp3","900.mp3","901.mp3","902.mp3","903.mp3","904.mp3","905.mp3","906.mp3","907.mp3","908.mp3","909.mp3","910.mp3","911.mp3","912.mp3","913.mp3","914.mp3","915.mp3","916.mp3","917.mp3","918.mp3","919.mp3","920.mp3","921.mp3","922.mp3","923.mp3","924.mp3","925.mp3","926.mp3","927.mp3","928.mp3"],["929.mp3","930.mp3","931.mp3","932.mp3","933.mp3","934.mp3","935.mp3","936.mp3","937.mp3","938.mp3","939.mp3","940.mp3","941.mp3","942.mp3","943.mp3","944.mp3","945.mp3","946.mp3","947.mp3","948.mp3","949.mp3","950.mp3","951.mp3","952.mp3","953.mp3","954.mp3","955.mp3","956.mp3","957.mp3","958.mp3","959.mp3","960.mp3"],["961.mp3","962.mp3","963.mp3","964.mp3","965.mp3","966.mp3","967.mp3","968.mp3","969.mp3","970.mp3","971.mp3","972.mp3","973.mp3","974.mp3","975.mp3","976.mp3","977.mp3","978.mp3","979.mp3","980.mp3","981.mp3","982.mp3","983.mp3","984.mp3","985.mp3","986.mp3","987.mp3","988.mp3","989.mp3","990.mp3","991.mp3","992.mp3"],["993.mp3","994.mp3","995.mp3","996.mp3","997.mp3","998.mp3","999.mp3","1000.mp3","1001.mp3","1002.mp3","1003.mp3","1004.mp3","1005.mp3","1006.mp3","1007.mp3","1008.mp3","1009.mp3","1010.mp3","1011.mp3","1012.mp3","1013.mp3","1014.mp3","1015.mp3","1016.mp3","1017.mp3","1018.mp3","1019.mp3","1020.mp3","1021.mp3","1022.mp3","1023.mp3","1024.mp3"]];



  var toLoad = 0;
  var loaded = 0;

  var settings = {
    stopOnRelease: false,
    loop:false,
    forceStopOnPress:false
  }

  var finished = function() {

  };

  var stopOnRelease = false;

var loading;

  var loadStem = function(i, j, loaded) {

    var loadedObj = function() {
      loaded++;
      loading.objectLoaded();
    }

//    if (toLoad >= 1024) return loadedObj();

    var audio = new Audio();

    audio.addEventListener("canplaythrough", loadedObj, false);

    audio.src = "/sounds/"+stems[i][j];

    var button = launchpad.getButton(i, j);
    console.log(button);

    audio.addEventListener("ended", function() {
      audio.currentTime = 0;
      button.light(1);
    });

    button.on("press", function() {
      console.log("press");
      if (!that.active) return;
      console.log("audio press");
      audio.currentTime = 0;
      audio.play();
      button.light(Launchpad.colors.orange.high);
    });

  }



  var loadStems = function() {
    loading = new Loading();

    for (var i in stems) {
      for (var j in stems[i]) {
        toLoad++;
        (function(i, j) {
          console.log(i*j);
          var t = setTimeout(function() {
            loadStem(i, j);
          }, i*j*10);
        })(i,j);
      }
    }

    loading.countToLoad = toLoad;
  }
  loadStems();
  return this;
}